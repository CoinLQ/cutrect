# -*- coding: utf-8 -*-
# Generated by Django 1.11.8 on 2018-01-27 14:11
from __future__ import unicode_literals

from django.db import migrations, models
import django.db.models.deletion
from rect.lib import fields
import rect.models
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('jwt_auth', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='AbsentTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=1, verbose_name='任务页的数量')),
                ('page_set', fields.JSONField(default=list, verbose_name='页的集合')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='absent_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '查漏补缺任务',
                'verbose_name_plural': '查漏补缺任务管理',
            },
        ),
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('log', models.CharField(default='', max_length=128, verbose_name='记录')),
                ('object_type', models.CharField(max_length=32, verbose_name='对象类型')),
                ('object_pk', models.CharField(max_length=64, verbose_name='对象主键')),
                ('action', models.CharField(max_length=16, verbose_name='行为')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='jwt_auth.Staff')),
            ],
        ),
        migrations.CreateModel(
            name='CCTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=20, verbose_name='任务字块数')),
                ('cc_threshold', models.FloatField(verbose_name='最高置信度')),
                ('rect_set', fields.JSONField(default=list, verbose_name='字块集')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='cc_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '置信校对任务',
                'verbose_name_plural': '置信校对任务管理',
            },
        ),
        migrations.CreateModel(
            name='CharClassifyPlan',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ch', models.CharField(blank=True, db_index=True, default='', max_length=2, null=True, verbose_name='文字')),
                ('total_cnt', models.IntegerField(db_index=True, default=0, verbose_name='总数')),
                ('needcheck_cnt', models.IntegerField(default=0, verbose_name='待检查数')),
                ('done_cnt', models.IntegerField(default=0, verbose_name='已完成数')),
                ('wcc_threshold', models.DecimalField(decimal_places=3, default=0, max_digits=4, verbose_name='识别置信阈值')),
            ],
            options={
                'verbose_name': '聚类准备表',
                'verbose_name_plural': '聚类准备表管理',
            },
        ),
        migrations.CreateModel(
            name='ClassifyTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=10, verbose_name='任务字块数')),
                ('char_set', models.TextField(blank=True, null=True, verbose_name='字符集')),
                ('rect_set', fields.JSONField(default=list, verbose_name='字块集')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='classify_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '聚类校对任务',
                'verbose_name_plural': '聚类校对任务管理',
            },
        ),
        migrations.CreateModel(
            name='DeletionCheckItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('op', models.PositiveSmallIntegerField(default=3, verbose_name='操作类型')),
                ('x', models.PositiveSmallIntegerField(default=0, verbose_name='X坐标')),
                ('y', models.PositiveSmallIntegerField(default=0, verbose_name='Y坐标')),
                ('w', models.PositiveSmallIntegerField(default=1, verbose_name='宽度')),
                ('h', models.PositiveSmallIntegerField(default=1, verbose_name='高度')),
                ('ocolumn_uri', models.CharField(max_length=128, verbose_name='行图片路径')),
                ('ocolumn_x', models.PositiveSmallIntegerField(default=0, verbose_name='行图X坐标')),
                ('ocolumn_y', models.PositiveSmallIntegerField(default=0, verbose_name='行图Y坐标')),
                ('ch', models.CharField(blank=True, default='', max_length=2, null=True, verbose_name='文字')),
                ('rect_id', models.CharField(max_length=128, verbose_name='字块CID')),
                ('result', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='审定意见')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='删框时间')),
                ('updated_at', models.DateTimeField(auto_now=True, null=True, verbose_name='更新时间')),
            ],
            options={
                'verbose_name': '删框记录',
                'verbose_name_plural': '删框记录管理',
            },
        ),
        migrations.CreateModel(
            name='DelTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=10, verbose_name='任务字块数')),
                ('rect_set', fields.JSONField(default=list, verbose_name='字块集')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='del_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '删框任务',
                'verbose_name_plural': '删框任务管理',
            },
        ),
        migrations.CreateModel(
            name='LQSutra',
            fields=[
                ('code', models.CharField(max_length=8, primary_key=True, serialize=False, verbose_name='龙泉经目编码')),
                ('name', models.CharField(max_length=64, verbose_name='龙泉经目名称')),
                ('total_reels', models.IntegerField(blank=True, default=1, verbose_name='总卷数')),
            ],
            options={
                'verbose_name': '龙泉经目',
                'verbose_name_plural': '龙泉经目管理',
            },
            bases=(models.Model, rect.models.TripiMixin),
        ),
        migrations.CreateModel(
            name='Node',
            fields=[
                ('name', models.CharField(max_length=64, verbose_name='名称')),
                ('code', models.CharField(max_length=27, primary_key=True, serialize=False, verbose_name='节点代码')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='rect.Node', verbose_name='父节点')),
            ],
            options={
                'verbose_name': '节点',
                'verbose_name_plural': '节点',
            },
        ),
        migrations.CreateModel(
            name='Page',
            fields=[
                ('pid', models.CharField(max_length=21, primary_key=True, serialize=False, verbose_name='实体藏经页级总编码')),
                ('bar_no', models.CharField(default='0', max_length=1, verbose_name='实体藏经页级栏序号')),
                ('vol_no', models.SmallIntegerField(default=0, verbose_name='册序号（第几）')),
                ('page_no', models.SmallIntegerField(default=0, verbose_name='册级页序号')),
                ('reel_no', models.SmallIntegerField(default=0, verbose_name='卷序号（第几）')),
                ('reel_page_no', models.SmallIntegerField(default=0, verbose_name='卷中页序号')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '初始化'), (1, '切分数据未上传'), (2, '数据解析失败'), (3, '字块数据未展开'), (4, '图片不存在'), (5, '列图不存在'), (6, '列图坐标不存在'), (7, '字块对应列图未准备'), (8, '字块对应列图不存在'), (9, '已准备好'), (10, '已入卷标记')], db_index=True, default=0, verbose_name='操作类型')),
                ('json', fields.JSONField(default=dict, verbose_name='栏信息')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('text', rect.models.SutraTextField(default='', verbose_name='经文')),
                ('cut_info', fields.JSONField(default=list, verbose_name='切分信息')),
                ('cut_updated_at', models.DateTimeField(null=True, verbose_name='切分同步时间')),
                ('cut_add_count', models.SmallIntegerField(default=0, verbose_name='切分信息增加字数')),
                ('cut_wrong_count', models.SmallIntegerField(default=0, verbose_name='切分信息识别错的字数')),
                ('cut_confirm_count', models.SmallIntegerField(default=0, verbose_name='切分信息需要确认的字数')),
                ('cut_verify_count', models.SmallIntegerField(default=0, verbose_name='切分信息需要确认的字数')),
                ('s3_uri', models.CharField(max_length=128, verbose_name='图片路径')),
            ],
            options={
                'verbose_name': '实体藏经页',
                'verbose_name_plural': '实体藏经页管理',
            },
        ),
        migrations.CreateModel(
            name='PageRect',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('op', models.PositiveSmallIntegerField(db_index=True, default=1, verbose_name='操作类型')),
                ('line_count', models.IntegerField(blank=True, null=True, verbose_name='最大行数')),
                ('column_count', models.IntegerField(blank=True, null=True, verbose_name='最大列数')),
                ('rect_set', fields.JSONField(default=list, verbose_name='切字块JSON切分数据集')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='创建时间')),
                ('primary', models.BooleanField(default=True, verbose_name='主切分方案')),
                ('page', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pagerects', to='rect.Page', verbose_name='关联源页信息')),
            ],
            options={
                'verbose_name_plural': '源页切分集管理',
                'ordering': ('id',),
                'verbose_name': '源页切分集',
            },
        ),
        migrations.CreateModel(
            name='PageTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=1, verbose_name='任务页的数量')),
                ('page_set', fields.JSONField(default=list, verbose_name='页的集合')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='page_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '逐字校对任务',
                'verbose_name_plural': '逐字校对任务管理',
            },
        ),
        migrations.CreateModel(
            name='Patch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('op', models.PositiveSmallIntegerField(default=1, verbose_name='操作类型')),
                ('x', models.PositiveSmallIntegerField(default=0, verbose_name='X坐标')),
                ('y', models.PositiveSmallIntegerField(default=0, verbose_name='Y坐标')),
                ('w', models.PositiveSmallIntegerField(default=1, verbose_name='宽度')),
                ('h', models.PositiveSmallIntegerField(default=1, verbose_name='高度')),
                ('ocolumn_uri', models.CharField(max_length=128, verbose_name='行图片路径')),
                ('ocolumn_x', models.PositiveSmallIntegerField(default=0, verbose_name='行图X坐标')),
                ('ocolumn_y', models.PositiveSmallIntegerField(default=0, verbose_name='行图Y坐标')),
                ('char_no', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='字号')),
                ('line_no', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='行号')),
                ('ch', models.CharField(blank=True, default='', max_length=2, null=True, verbose_name='文字')),
                ('rect_id', models.CharField(max_length=128, verbose_name='字块CID')),
                ('rect_x', models.PositiveSmallIntegerField(default=0, verbose_name='原字块X坐标')),
                ('rect_y', models.PositiveSmallIntegerField(default=0, verbose_name='原字块Y坐标')),
                ('rect_w', models.PositiveSmallIntegerField(default=1, verbose_name='原字块宽度')),
                ('rect_h', models.PositiveSmallIntegerField(default=1, verbose_name='原字块高度')),
                ('ts', models.CharField(blank=True, default='', max_length=2, null=True, verbose_name='修订文字')),
                ('result', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='审定意见')),
                ('submitted_at', models.DateTimeField(auto_now_add=True, verbose_name='修订时间')),
                ('updated_at', models.DateTimeField(auto_now=True, null=True, verbose_name='更新时间')),
                ('modifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='modify_patches', to='jwt_auth.Staff', verbose_name='修改人')),
            ],
            options={
                'verbose_name_plural': 'Patch管理',
                'ordering': ('ch',),
                'verbose_name': 'Patch',
            },
        ),
        migrations.CreateModel(
            name='Rect',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('cid', models.CharField(db_index=True, max_length=28, verbose_name='经字号')),
                ('page_code', models.CharField(db_index=True, max_length=23, verbose_name='关联源页CODE')),
                ('column_set', fields.JSONField(default=list, verbose_name='切字块所在切列JSON数据集')),
                ('char_no', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='字号')),
                ('line_no', models.PositiveSmallIntegerField(blank=True, default=0, null=True, verbose_name='行号')),
                ('op', models.PositiveSmallIntegerField(default=1, verbose_name='操作类型')),
                ('x', models.PositiveSmallIntegerField(default=0, verbose_name='X坐标')),
                ('y', models.PositiveSmallIntegerField(default=0, verbose_name='Y坐标')),
                ('w', models.IntegerField(default=1, verbose_name='宽度')),
                ('h', models.IntegerField(default=1, verbose_name='高度')),
                ('cc', models.FloatField(blank=True, db_index=True, default=1, null=True, verbose_name='切分置信度')),
                ('ch', models.CharField(blank=True, db_index=True, default='', max_length=2, null=True, verbose_name='文字')),
                ('wcc', models.FloatField(blank=True, db_index=True, default=1, null=True, verbose_name='识别置信度')),
                ('ts', models.CharField(blank=True, default='', max_length=2, null=True, verbose_name='标字')),
                ('s3_inset', models.FileField(blank=True, max_length=256, null=True, storage='storages.backends.s3boto.S3BotoStorage', upload_to='tripitaka/hans', verbose_name='s3地址')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间1')),
            ],
            options={
                'verbose_name_plural': '源-切字块管理',
                'ordering': ('-cc',),
                'verbose_name': '源-切字块',
            },
        ),
        migrations.CreateModel(
            name='Reel',
            fields=[
                ('rid', models.CharField(max_length=14, primary_key=True, serialize=False, verbose_name='实体藏经卷级总编码')),
                ('reel_no', models.SmallIntegerField(verbose_name='经卷序号')),
                ('ready', models.BooleanField(db_index=True, default=False, verbose_name='已准备好')),
                ('txt_ready', models.BooleanField(default=False, verbose_name='文本状态')),
                ('cut_ready', models.BooleanField(default=False, verbose_name='切分数据状态')),
                ('column_ready', models.BooleanField(default=False, verbose_name='切列图状态')),
                ('start_vol', models.SmallIntegerField(default=0, verbose_name='起始册')),
                ('start_vol_page', models.SmallIntegerField(default=0, verbose_name='起始册的页序号')),
                ('end_vol', models.SmallIntegerField(default=0, verbose_name='终止册')),
                ('end_vol_page', models.SmallIntegerField(default=0, verbose_name='终止册的页序号')),
                ('text', rect.models.SutraTextField(default='', verbose_name='经文')),
            ],
            options={
                'verbose_name': '实体藏经卷',
                'verbose_name_plural': '实体藏经卷管理',
            },
        ),
        migrations.CreateModel(
            name='Reel_Task_Statistical',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount_of_cctasks', models.IntegerField(default=-1, verbose_name='置信任务总数')),
                ('completed_cctasks', models.IntegerField(default=0, verbose_name='置信任务完成数')),
                ('amount_of_absenttasks', models.IntegerField(default=-1, verbose_name='查漏任务总数')),
                ('completed_absenttasks', models.IntegerField(default=0, verbose_name='查漏任务完成数')),
                ('amount_of_pptasks', models.IntegerField(default=-1, verbose_name='逐字任务总数')),
                ('completed_pptasks', models.IntegerField(default=0, verbose_name='逐字任务完成数')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('reel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reel_tasks_statis', to='rect.Reel')),
            ],
            options={
                'verbose_name_plural': '实体卷任务统计管理',
                'ordering': ('schedule', '-updated_at'),
                'verbose_name': '实体卷任务统计',
            },
        ),
        migrations.CreateModel(
            name='ReviewTask',
            fields=[
                ('number', models.CharField(max_length=64, primary_key=True, serialize=False, verbose_name='任务编号')),
                ('ttype', models.PositiveSmallIntegerField(choices=[(2, '置信度'), (1, '顺序校对'), (3, '聚类'), (4, '差缺补漏'), (5, '删框'), (6, '反馈审查')], db_index=True, default=1, verbose_name='切分方式')),
                ('desc', models.TextField(blank=True, null=True, verbose_name='任务格式化描述')),
                ('status', models.PositiveSmallIntegerField(choices=[(0, '未领取'), (1, '已过期'), (2, '已放弃'), (4, '处理中'), (5, '已完成'), (6, '已作废')], db_index=True, default=0, verbose_name='任务状态')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], db_index=True, default=3, verbose_name='任务优先级')),
                ('update_date', models.DateField(null=True, verbose_name='最近处理时间')),
                ('count', models.IntegerField(default=10, verbose_name='任务字块数')),
                ('rect_set', fields.JSONField(default=list, verbose_name='字块补丁集')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='review_tasks', to='jwt_auth.Staff')),
            ],
            options={
                'verbose_name': '审定任务',
                'verbose_name_plural': '审定任务管理',
            },
        ),
        migrations.CreateModel(
            name='Schedule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=64, verbose_name='计划名称')),
                ('cc_threshold', models.FloatField(blank=True, default=0.65, verbose_name='切分置信度阈值')),
                ('priority', models.PositiveSmallIntegerField(choices=[(1, '低'), (3, '中'), (5, '高'), (7, '最高')], default=3, verbose_name='任务计划优先级')),
                ('status', models.PositiveSmallIntegerField(blank=True, choices=[(0, '未激活'), (1, '已激活'), (2, '已过期'), (3, '已作废'), (4, '已完成')], db_index=True, default=0, null=True, verbose_name='计划状态')),
                ('due_at', models.DateField(blank=True, null=True, verbose_name='截止日期')),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='创建日期')),
                ('remark', models.TextField(blank=True, max_length=256, null=True, verbose_name='备注')),
                ('schedule_no', models.CharField(blank=True, default='', help_text='自动生成', max_length=64, verbose_name='切分计划批次')),
                ('reels', models.ManyToManyField(blank=True, to='rect.Reel')),
            ],
            options={
                'verbose_name_plural': '切分计划管理',
                'ordering': ('due_at', 'status'),
                'verbose_name': '切分计划',
            },
        ),
        migrations.CreateModel(
            name='Schedule_Task_Statistical',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('amount_of_cctasks', models.IntegerField(default=-1, verbose_name='置信任务总数')),
                ('completed_cctasks', models.IntegerField(default=0, verbose_name='置信任务完成数')),
                ('amount_of_classifytasks', models.IntegerField(default=-1, verbose_name='聚类任务总数')),
                ('completed_classifytasks', models.IntegerField(default=0, verbose_name='聚类任务完成数')),
                ('amount_of_absenttasks', models.IntegerField(default=-1, verbose_name='查漏任务总数')),
                ('completed_absenttasks', models.IntegerField(default=0, verbose_name='查漏任务完成数')),
                ('amount_of_pptasks', models.IntegerField(default=-1, verbose_name='逐字任务总数')),
                ('completed_pptasks', models.IntegerField(default=0, verbose_name='逐字任务完成数')),
                ('amount_of_vdeltasks', models.IntegerField(default=-1, verbose_name='删框任务总数')),
                ('completed_vdeltasks', models.IntegerField(default=0, verbose_name='删框任务完成数')),
                ('amount_of_reviewtasks', models.IntegerField(default=-1, verbose_name='审定任务总数')),
                ('completed_reviewtasks', models.IntegerField(default=0, verbose_name='审定任务完成数')),
                ('remark', models.TextField(blank=True, default='', max_length=256, null=True, verbose_name='备注')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('schedule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='schedule_task_statis', to='rect.Schedule', verbose_name='切分计划')),
            ],
            options={
                'verbose_name_plural': '切分计划任务统计管理',
                'ordering': ('schedule',),
                'verbose_name': '切分计划任务统计',
            },
        ),
        migrations.CreateModel(
            name='Sutra',
            fields=[
                ('sid', models.CharField(max_length=10, primary_key=True, serialize=False, verbose_name='实体藏经|唯一经号编码')),
                ('code', models.CharField(max_length=5, verbose_name='实体经目编码')),
                ('variant_code', models.CharField(default='0', max_length=1, verbose_name='别本编码')),
                ('name', models.CharField(blank=True, max_length=64, verbose_name='实体经目名称')),
                ('total_reels', models.IntegerField(blank=True, default=1, verbose_name='总卷数')),
                ('lqsutra', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='rect.LQSutra', verbose_name='龙泉经目编码')),
            ],
            options={
                'verbose_name': '实体经目',
                'verbose_name_plural': '实体经目管理',
            },
            bases=(models.Model, rect.models.TripiMixin),
        ),
        migrations.CreateModel(
            name='Tripitaka',
            fields=[
                ('code', models.CharField(max_length=4, primary_key=True, serialize=False, verbose_name='实体藏经版本编码')),
                ('name', models.CharField(max_length=32, verbose_name='实体藏经名称')),
                ('shortname', models.CharField(max_length=32, verbose_name='简称（用于校勘记）')),
                ('vol_reel_mark', models.CharField(choices=[('v', 'v: 表示册'), ('r', 'r: 表示卷')], default='r', max_length=1, verbose_name='册/卷标记符号')),
            ],
            options={
                'verbose_name': '实体藏经',
                'verbose_name_plural': '实体藏经管理',
            },
            bases=(models.Model, rect.models.TripiMixin),
        ),
        migrations.CreateModel(
            name='Volume',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vol_no', models.SmallIntegerField(verbose_name='册序号')),
                ('page_count', models.IntegerField(verbose_name='册页数')),
                ('tripitaka', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='rect.Tripitaka')),
            ],
            options={
                'verbose_name': '实体册',
                'verbose_name_plural': '实体册',
            },
        ),
        migrations.AddField(
            model_name='sutra',
            name='tripitaka',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sutras', to='rect.Tripitaka'),
        ),
        migrations.AddField(
            model_name='reviewtask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='review_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='reel_task_statistical',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='schedule_reel_task_statis', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='reel',
            name='sutra',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reels', to='rect.Sutra'),
        ),
        migrations.AddField(
            model_name='rect',
            name='reel',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='rects', to='rect.Reel'),
        ),
        migrations.AddField(
            model_name='patch',
            name='reel',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='patches', to='rect.Reel'),
        ),
        migrations.AddField(
            model_name='patch',
            name='verifier',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='verify_patches', to='jwt_auth.Staff', verbose_name='审定人'),
        ),
        migrations.AddField(
            model_name='pagetask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='page_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='pagerect',
            name='reel',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='reels', to='rect.Reel'),
        ),
        migrations.AddField(
            model_name='page',
            name='reel',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pages', to='rect.Reel'),
        ),
        migrations.AddField(
            model_name='deltask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='del_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='deletioncheckitem',
            name='del_task',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='del_task_items', to='rect.DelTask', verbose_name='删框任务'),
        ),
        migrations.AddField(
            model_name='deletioncheckitem',
            name='modifier',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='modify_deletions', to='jwt_auth.Staff', verbose_name='修改人'),
        ),
        migrations.AddField(
            model_name='deletioncheckitem',
            name='verifier',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='verify_deletions', to='jwt_auth.Staff', verbose_name='审定人'),
        ),
        migrations.AddField(
            model_name='classifytask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='classify_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='charclassifyplan',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='char_clsfy_plan', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='cctask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cc_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
        migrations.AddField(
            model_name='absenttask',
            name='schedule',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='absent_tasks', to='rect.Schedule', verbose_name='切分计划'),
        ),
    ]
